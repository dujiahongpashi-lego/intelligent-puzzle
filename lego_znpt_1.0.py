# 需要在A口接入压力传感器
# 压力传感器：重新出题（视频中未演示）
# 左右按钮：回顾题目内容
answer=[[['A','D','D','D','E','E','E','E'],['A','D','D','D','E','E','E','E'],['A','B','B','G','G','G','G','G'],['A','B','B','G','G','G','G','G'],['1','3','F','F','F','H','H','H'],['2','3','F','F','F','H','H','H'],['2','3','F','F','F','H','H','H'],['C','C','C','C','C','H','H','H']],
[['A','C','G','G','H','H','H','H'],['A','C','G','G','H','H','H','H'],['A','C','G','G','H','H','H','H'],['A','C','G','G','F','F','F','3'],['2','C','G','G','F','F','F','3'],['2','1','D','D','F','F','F','3'],['B','B','D','D','E','E','E','E'],['B','B','D','D','E','E','E','E']],
[['2','2','A','A','A','A','B','B'],['G','G','G','G','G','1','B','B'],['G','G','G','G','G','D','D','D'],['C','E','E','E','E','D','D','D'],['C','E','E','E','E','H','H','H'],['C','3','F','F','F','H','H','H'],['C','3','F','F','F','H','H','H'],['C','3','F','F','F','H','H','H']],
[['2','2','G','G','E','E','E','E'],['1','C','G','G','E','E','E','E'],['A','C','G','G','F','F','F','3'],['A','C','G','G','F','F','F','3'],['A','C','G','G','F','F','F','3'],['A','C','H','H','H','H','D','D'],['B','B','H','H','H','H','D','D'],['B','B','H','H','H','H','D','D']],
[['1','A','A','A','A','D','D','D'],['G','G','G','G','G','D','D','D'],['G','G','G','G','G','F','F','F'],['C','E','E','E','E','F','F','F'],['C','E','E','E','E','F','F','F'],['C','2','B','B','H','H','H','H'],['C','2','B','B','H','H','H','H'],['C','3','3','3','H','H','H','H']],
[['1','2','2','A','A','A','A','C'],['D','D','B','B','3','3','3','C'],['D','D','B','B','F','F','F','C'],['D','D','G','G','F','F','F','C'],['E','E','G','G','F','F','F','C'],['E','E','G','G','H','H','H','H'],['E','E','G','G','H','H','H','H'],['E','E','G','G','H','H','H','H']],
[['1','2','2','A','A','A','A','C'],['G','G','E','E','3','3','3','C'],['G','G','E','E','F','F','F','C'],['G','G','E','E','F','F','F','C'],['G','G','E','E','F','F','F','C'],['G','G','H','H','H','H','D','D'],['B','B','H','H','H','H','D','D'],['B','B','H','H','H','H','D','D']],
[['2','2','1','E','E','E','E','C'],['F','F','F','E','E','E','E','C'],['F','F','F','H','H','H','3','C'],['F','F','F','H','H','H','3','C'],['A','B','B','H','H','H','3','C'],['A','B','B','H','H','H','D','D'],['A','G','G','G','G','G','D','D'],['A','G','G','G','G','G','D','D']],
[['1','2','2','A','A','A','A','C'],['G','G','D','D','3','3','3','C'],['G','G','D','D','F','F','F','C'],['G','G','D','D','F','F','F','C'],['G','G','E','E','F','F','F','C'],['G','G','E','E','H','H','H','H'],['B','B','E','E','H','H','H','H'],['B','B','E','E','H','H','H','H']],
[['2','2','1','C','C','C','C','C'],['H','H','H','B','B','D','D','D'],['H','H','H','B','B','D','D','D'],['H','H','H','G','G','G','G','G'],['H','H','H','G','G','G','G','G'],['A','A','A','A','F','F','F','3'],['E','E','E','E','F','F','F','3'],['E','E','E','E','F','F','F','3']],
[['2','2','1','B','B','A','E','E'],['H','H','H','B','B','A','E','E'],['H','H','H','G','G','A','E','E'],['H','H','H','G','G','A','E','E'],['H','H','H','G','G','3','3','3'],['D','D','D','G','G','F','F','F'],['D','D','D','G','G','F','F','F'],['C','C','C','C','C','F','F','F']],
[['2','2','1','E','E','E','E','A'],['3','3','3','E','E','E','E','A'],['C','C','C','C','C','B','B','A'],['G','G','G','G','G','B','B','A'],['G','G','G','G','G','H','H','H'],['D','D','F','F','F','H','H','H'],['D','D','F','F','F','H','H','H'],['D','D','F','F','F','H','H','H']],
[['C','F','F','F','E','E','E','E'],['C','F','F','F','E','E','E','E'],['C','F','F','F','A','A','A','A'],['C','B','B','H','H','H','H','3'],['C','B','B','H','H','H','H','3'],['2','2','1','H','H','H','H','3'],['D','D','D','G','G','G','G','G'],['D','D','D','G','G','G','G','G']],
[['2','2','1','D','D','D','B','B'],['E','E','A','D','D','D','B','B'],['E','E','A','G','G','G','G','G'],['E','E','A','G','G','G','G','G'],['E','E','A','H','H','H','H','3'],['F','F','F','H','H','H','H','3'],['F','F','F','H','H','H','H','3'],['F','F','F','C','C','C','C','C']],
[['2','2','1','C','C','C','C','C'],['H','H','H','H','D','D','B','B'],['H','H','H','H','D','D','B','B'],['H','H','H','H','D','D','G','G'],['E','E','F','F','F','A','G','G'],['E','E','F','F','F','A','G','G'],['E','E','F','F','F','A','G','G'],['E','E','3','3','3','A','G','G']],
[['2','2','A','A','A','A','B','B'],['C','3','F','F','F','1','B','B'],['C','3','F','F','F','D','D','D'],['C','3','F','F','F','D','D','D'],['C','E','E','E','E','H','H','H'],['C','E','E','E','E','H','H','H'],['G','G','G','G','G','H','H','H'],['G','G','G','G','G','H','H','H']],
[['2','2','1','C','C','C','C','C'],['H','H','H','H','D','D','B','B'],['H','H','H','H','D','D','B','B'],['H','H','H','H','D','D','G','G'],['E','E','F','F','F','3','G','G'],['E','E','F','F','F','3','G','G'],['E','E','F','F','F','3','G','G'],['E','E','A','A','A','A','G','G']],
[['2','2','A','A','A','A','1','C'],['D','D','D','E','E','E','E','C'],['D','D','D','E','E','E','E','C'],['B','B','G','G','G','G','G','C'],['B','B','G','G','G','G','G','C'],['3','F','F','F','H','H','H','H'],['3','F','F','F','H','H','H','H'],['3','F','F','F','H','H','H','H']],
[['2','C','C','C','C','C','B','B'],['2','A','A','A','A','1','B','B'],['G','G','G','G','G','H','H','H'],['G','G','G','G','G','H','H','H'],['3','3','3','E','E','H','H','H'],['F','F','F','E','E','H','H','H'],['F','F','F','E','E','D','D','D'],['F','F','F','E','E','D','D','D']],
[['A','C','C','C','C','C','G','G'],['A','3','3','3','E','E','G','G'],['A','F','F','F','E','E','G','G'],['A','F','F','F','E','E','G','G'],['1','F','F','F','E','E','G','G'],['2','2','H','H','H','H','D','D'],['B','B','H','H','H','H','D','D'],['B','B','H','H','H','H','D','D']],
[['A','C','E','E','E','E','G','G'],['A','C','E','E','E','E','G','G'],['A','C','F','F','F','3','G','G'],['A','C','F','F','F','3','G','G'],['2','C','F','F','F','3','G','G'],['2','1','H','H','H','H','D','D'],['B','B','H','H','H','H','D','D'],['B','B','H','H','H','H','D','D']],
[['3','3','3','2','E','E','E','E'],['F','F','F','2','E','E','E','E'],['F','F','F','G','G','G','G','G'],['F','F','F','G','G','G','G','G'],['B','B','D','D','D','H','H','H'],['B','B','D','D','D','H','H','H'],['C','C','C','C','C','H','H','H'],['A','A','A','A','1','H','H','H']],
[['2','H','H','H','E','E','G','G'],['2','H','H','H','E','E','G','G'],['1','H','H','H','E','E','G','G'],['A','H','H','H','E','E','G','G'],['A','D','D','F','F','F','G','G'],['A','D','D','F','F','F','B','B'],['A','D','D','F','F','F','B','B'],['C','C','C','C','C','3','3','3']],
[['3','3','3','1','E','E','E','E'],['A','A','A','A','E','E','E','E'],['D','D','D','G','G','G','G','G'],['D','D','D','G','G','G','G','G'],['B','B','F','F','F','H','H','H'],['B','B','F','F','F','H','H','H'],['2','2','F','F','F','H','H','H'],['C','C','C','C','C','H','H','H']],
[['3','3','3','1','H','H','H','H'],['E','E','2','2','H','H','H','H'],['E','E','G','G','H','H','H','H'],['E','E','G','G','C','F','F','F'],['E','E','G','G','C','F','F','F'],['B','B','G','G','C','F','F','F'],['B','B','G','G','C','D','D','D'],['A','A','A','A','C','D','D','D']],
[['3','3','3','2','B','B','E','E'],['H','H','H','2','B','B','E','E'],['H','H','H','F','F','F','E','E'],['H','H','H','F','F','F','E','E'],['H','H','H','F','F','F','1','A'],['D','D','C','C','C','C','C','A'],['D','D','G','G','G','G','G','A'],['D','D','G','G','G','G','G','A']],
[['2','C','C','C','C','C','B','B'],['2','1','A','A','A','A','B','B'],['E','E','F','F','F','D','D','D'],['E','E','F','F','F','D','D','D'],['E','E','F','F','F','H','H','H'],['E','E','3','3','3','H','H','H'],['G','G','G','G','G','H','H','H'],['G','G','G','G','G','H','H','H']],
[['2','H','H','H','A','A','A','A'],['2','H','H','H','F','F','F','3'],['1','H','H','H','F','F','F','3'],['C','H','H','H','F','F','F','3'],['C','E','E','G','G','G','G','G'],['C','E','E','G','G','G','G','G'],['C','E','E','D','D','D','B','B'],['C','E','E','D','D','D','B','B']],
[['C','C','C','C','C','F','F','F'],['E','E','H','H','H','F','F','F'],['E','E','H','H','H','F','F','F'],['E','E','H','H','H','B','B','3'],['E','E','H','H','H','B','B','3'],['2','2','A','A','A','A','1','3'],['D','D','D','G','G','G','G','G'],['D','D','D','G','G','G','G','G']],
[['2','H','H','H','E','E','E','E'],['2','H','H','H','E','E','E','E'],['A','H','H','H','F','F','F','3'],['A','H','H','H','F','F','F','3'],['A','B','B','1','F','F','F','3'],['A','B','B','G','G','G','G','G'],['D','D','D','G','G','G','G','G'],['D','D','D','C','C','C','C','C']],
[['3','3','3','1','2','C','D','D'],['A','A','A','A','2','C','D','D'],['B','B','F','F','F','C','D','D'],['B','B','F','F','F','C','G','G'],['E','E','F','F','F','C','G','G'],['E','E','H','H','H','H','G','G'],['E','E','H','H','H','H','G','G'],['E','E','H','H','H','H','G','G']],
[['3','2','2','G','G','G','G','G'],['3','A','1','G','G','G','G','G'],['3','A','H','H','H','H','B','B'],['C','A','H','H','H','H','B','B'],['C','A','H','H','H','H','E','E'],['C','D','D','F','F','F','E','E'],['C','D','D','F','F','F','E','E'],['C','D','D','F','F','F','E','E']],
[['2','H','H','H','3','3','3','C'],['2','H','H','H','F','F','F','C'],['A','H','H','H','F','F','F','C'],['A','H','H','H','F','F','F','C'],['A','G','G','G','G','G','1','C'],['A','G','G','G','G','G','D','D'],['B','B','E','E','E','E','D','D'],['B','B','E','E','E','E','D','D']],
[['2','H','H','H','3','F','F','F'],['2','H','H','H','3','F','F','F'],['1','H','H','H','3','F','F','F'],['C','H','H','H','A','A','A','A'],['C','B','B','G','G','G','G','G'],['C','B','B','G','G','G','G','G'],['C','E','E','E','E','D','D','D'],['C','E','E','E','E','D','D','D']],
[['3','3','3','1','A','A','A','A'],['D','D','F','F','F','B','B','2'],['D','D','F','F','F','B','B','2'],['D','D','F','F','F','C','G','G'],['E','E','H','H','H','C','G','G'],['E','E','H','H','H','C','G','G'],['E','E','H','H','H','C','G','G'],['E','E','H','H','H','C','G','G']],
[['3','3','3','A','C','2','B','B'],['F','F','F','A','C','2','B','B'],['F','F','F','A','C','H','H','H'],['F','F','F','A','C','H','H','H'],['E','E','E','E','C','H','H','H'],['E','E','E','E','1','H','H','H'],['G','G','G','G','G','D','D','D'],['G','G','G','G','G','D','D','D']],
[['3','3','3','A','A','A','A','C'],['B','B','G','G','F','F','F','C'],['B','B','G','G','F','F','F','C'],['D','D','G','G','F','F','F','C'],['D','D','G','G','2','2','1','C'],['D','D','G','G','H','H','H','H'],['E','E','E','E','H','H','H','H'],['E','E','E','E','H','H','H','H']],
[['3','3','3','1','A','A','A','A'],['B','B','F','F','F','D','D','D'],['B','B','F','F','F','D','D','D'],['G','G','F','F','F','2','2','C'],['G','G','E','E','H','H','H','C'],['G','G','E','E','H','H','H','C'],['G','G','E','E','H','H','H','C'],['G','G','E','E','H','H','H','C']],
[['3','3','3','2','A','A','A','A'],['C','B','B','2','1','H','H','H'],['C','B','B','E','E','H','H','H'],['C','D','D','E','E','H','H','H'],['C','D','D','E','E','H','H','H'],['C','D','D','E','E','F','F','F'],['G','G','G','G','G','F','F','F'],['G','G','G','G','G','F','F','F']],
[['3','3','3','1','A','A','A','A'],['H','H','H','G','G','B','B','2'],['H','H','H','G','G','B','B','2'],['H','H','H','G','G','D','D','C'],['H','H','H','G','G','D','D','C'],['F','F','F','G','G','D','D','C'],['F','F','F','E','E','E','E','C'],['F','F','F','E','E','E','E','C']],
[['3','3','3','1','E','E','E','E'],['H','H','H','H','E','E','E','E'],['H','H','H','H','B','B','2','2'],['H','H','H','H','B','B','G','G'],['A','D','D','F','F','F','G','G'],['A','D','D','F','F','F','G','G'],['A','D','D','F','F','F','G','G'],['A','C','C','C','C','C','G','G']],
[['2','D','D','D','H','H','H','H'],['2','D','D','D','H','H','H','H'],['A','F','F','F','H','H','H','H'],['A','F','F','F','B','B','G','G'],['A','F','F','F','B','B','G','G'],['A','E','E','E','E','3','G','G'],['1','E','E','E','E','3','G','G'],['C','C','C','C','C','3','G','G']],
[['2','D','D','D','E','E','E','E'],['2','D','D','D','E','E','E','E'],['F','F','F','C','C','C','C','C'],['F','F','F','B','B','H','H','H'],['F','F','F','B','B','H','H','H'],['1','A','A','A','A','H','H','H'],['G','G','G','G','G','H','H','H'],['G','G','G','G','G','3','3','3']],
[['2','D','D','D','A','A','A','A'],['2','D','D','D','E','E','E','E'],['1','F','F','F','E','E','E','E'],['C','F','F','F','H','H','H','H'],['C','F','F','F','H','H','H','H'],['C','3','3','3','H','H','H','H'],['C','G','G','G','G','G','B','B'],['C','G','G','G','G','G','B','B']],
[['2','D','D','D','E','E','E','E'],['2','D','D','D','E','E','E','E'],['C','C','C','C','C','H','H','H'],['G','G','F','F','F','H','H','H'],['G','G','F','F','F','H','H','H'],['G','G','F','F','F','H','H','H'],['G','G','B','B','A','A','A','A'],['G','G','B','B','1','3','3','3']],
[['2','B','B','G','G','G','G','G'],['2','B','B','G','G','G','G','G'],['F','F','F','H','H','H','E','E'],['F','F','F','H','H','H','E','E'],['F','F','F','H','H','H','E','E'],['3','3','3','H','H','H','E','E'],['C','C','C','C','C','D','D','D'],['A','A','A','A','1','D','D','D']],
[['2','E','E','B','B','D','D','D'],['2','E','E','B','B','D','D','D'],['1','E','E','G','G','G','G','G'],['C','E','E','G','G','G','G','G'],['C','3','3','3','H','H','H','H'],['C','F','F','F','H','H','H','H'],['C','F','F','F','H','H','H','H'],['C','F','F','F','A','A','A','A']],
[['2','B','B','G','G','G','G','G'],['2','B','B','G','G','G','G','G'],['C','C','C','C','C','D','D','D'],['1','3','F','F','F','D','D','D'],['A','3','F','F','F','H','H','H'],['A','3','F','F','F','H','H','H'],['A','E','E','E','E','H','H','H'],['A','E','E','E','E','H','H','H']],
[['2','E','E','E','E','G','G','C'],['2','E','E','E','E','G','G','C'],['B','B','D','D','D','G','G','C'],['B','B','D','D','D','G','G','C'],['A','A','A','A','1','G','G','C'],['3','F','F','F','H','H','H','H'],['3','F','F','F','H','H','H','H'],['3','F','F','F','H','H','H','H']],
[['2','B','B','D','D','D','E','E'],['2','B','B','D','D','D','E','E'],['A','G','G','G','G','G','E','E'],['A','G','G','G','G','G','E','E'],['A','3','F','F','F','H','H','H'],['A','3','F','F','F','H','H','H'],['1','3','F','F','F','H','H','H'],['C','C','C','C','C','H','H','H']],
[['2','A','A','A','A','1','B','B'],['2','C','C','C','C','C','B','B'],['F','F','F','G','G','G','G','G'],['F','F','F','G','G','G','G','G'],['F','F','F','3','3','3','E','E'],['D','D','H','H','H','H','E','E'],['D','D','H','H','H','H','E','E'],['D','D','H','H','H','H','E','E']],
[['2','A','A','A','A','1','B','B'],['2','C','C','C','C','C','B','B'],['G','G','G','G','G','D','D','D'],['G','G','G','G','G','D','D','D'],['E','E','H','H','H','F','F','F'],['E','E','H','H','H','F','F','F'],['E','E','H','H','H','F','F','F'],['E','E','H','H','H','3','3','3']],
[['2','A','A','A','A','1','B','B'],['2','C','C','C','C','C','B','B'],['H','H','H','F','F','F','E','E'],['H','H','H','F','F','F','E','E'],['H','H','H','F','F','F','E','E'],['H','H','H','3','3','3','E','E'],['G','G','G','G','G','D','D','D'],['G','G','G','G','G','D','D','D']],
[['2','B','B','C','C','C','C','C'],['2','B','B','3','3','3','E','E'],['D','D','H','H','H','H','E','E'],['D','D','H','H','H','H','E','E'],['D','D','H','H','H','H','E','E'],['F','F','F','G','G','G','G','G'],['F','F','F','G','G','G','G','G'],['F','F','F','1','A','A','A','A']],
[['2','B','B','G','G','G','G','G'],['2','B','B','G','G','G','G','G'],['E','E','E','E','H','H','H','H'],['E','E','E','E','H','H','H','H'],['A','F','F','F','H','H','H','H'],['A','F','F','F','D','D','D','3'],['A','F','F','F','D','D','D','3'],['A','C','C','C','C','C','1','3']],
[['2','B','B','G','G','G','G','G'],['2','B','B','G','G','G','G','G'],['C','C','C','C','C','H','H','H'],['D','D','F','F','F','H','H','H'],['D','D','F','F','F','H','H','H'],['D','D','F','F','F','H','H','H'],['3','3','3','1','E','E','E','E'],['A','A','A','A','E','E','E','E']],
[['2','B','B','G','G','G','G','G'],['2','B','B','G','G','G','G','G'],['C','C','C','C','C','D','D','D'],['E','E','E','E','1','D','D','D'],['E','E','E','E','H','H','H','H'],['3','F','F','F','H','H','H','H'],['3','F','F','F','H','H','H','H'],['3','F','F','F','A','A','A','A']],
[['2','E','E','E','E','F','F','F'],['2','E','E','E','E','F','F','F'],['G','G','3','3','3','F','F','F'],['G','G','D','D','H','H','H','H'],['G','G','D','D','H','H','H','H'],['G','G','D','D','H','H','H','H'],['G','G','A','A','A','A','B','B'],['C','C','C','C','C','1','B','B']],
[['2','D','D','D','H','H','H','H'],['2','D','D','D','H','H','H','H'],['A','A','A','A','H','H','H','H'],['C','F','F','F','1','3','3','3'],['C','F','F','F','E','E','E','E'],['C','F','F','F','E','E','E','E'],['C','B','B','G','G','G','G','G'],['C','B','B','G','G','G','G','G']],
[['2','D','D','D','H','H','H','3'],['2','D','D','D','H','H','H','3'],['A','A','A','A','H','H','H','3'],['C','F','F','F','H','H','H','1'],['C','F','F','F','E','E','E','E'],['C','F','F','F','E','E','E','E'],['C','G','G','G','G','G','B','B'],['C','G','G','G','G','G','B','B']],
[['2','D','D','C','C','C','C','C'],['2','D','D','G','G','H','H','H'],['A','D','D','G','G','H','H','H'],['A','E','E','G','G','H','H','H'],['A','E','E','G','G','H','H','H'],['A','E','E','G','G','F','F','F'],['1','E','E','B','B','F','F','F'],['3','3','3','B','B','F','F','F']],
[['2','D','D','C','C','C','C','C'],['2','D','D','F','F','F','G','G'],['A','D','D','F','F','F','G','G'],['A','E','E','F','F','F','G','G'],['A','E','E','H','H','H','G','G'],['A','E','E','H','H','H','G','G'],['1','E','E','H','H','H','B','B'],['3','3','3','H','H','H','B','B']],
[['3','3','3','A','A','A','A','C'],['B','B','G','G','G','G','G','C'],['B','B','G','G','G','G','G','C'],['2','F','F','F','D','D','D','C'],['2','F','F','F','D','D','D','C'],['1','F','F','F','H','H','H','H'],['E','E','E','E','H','H','H','H'],['E','E','E','E','H','H','H','H']],
[['2','C','C','C','C','C','D','D'],['2','1','3','F','F','F','D','D'],['E','E','3','F','F','F','D','D'],['E','E','3','F','F','F','G','G'],['E','E','A','A','A','A','G','G'],['E','E','H','H','H','H','G','G'],['B','B','H','H','H','H','G','G'],['B','B','H','H','H','H','G','G']],
[['2','C','C','C','C','C','G','G'],['2','B','B','F','F','F','G','G'],['1','B','B','F','F','F','G','G'],['3','3','3','F','F','F','G','G'],['H','H','H','E','E','A','G','G'],['H','H','H','E','E','A','D','D'],['H','H','H','E','E','A','D','D'],['H','H','H','E','E','A','D','D']],
[['2','B','B','H','H','H','H','3'],['2','B','B','H','H','H','H','3'],['G','G','1','H','H','H','H','3'],['G','G','A','E','E','F','F','F'],['G','G','A','E','E','F','F','F'],['G','G','A','E','E','F','F','F'],['G','G','A','E','E','D','D','D'],['C','C','C','C','C','D','D','D']],
[['2','B','B','H','H','H','H','3'],['2','B','B','H','H','H','H','3'],['1','D','D','H','H','H','H','3'],['C','D','D','G','G','G','G','G'],['C','D','D','G','G','G','G','G'],['C','A','A','A','A','F','F','F'],['C','E','E','E','E','F','F','F'],['C','E','E','E','E','F','F','F']],
[['2','2','G','G','3','F','F','F'],['C','1','G','G','3','F','F','F'],['C','A','G','G','3','F','F','F'],['C','A','G','G','E','E','E','E'],['C','A','G','G','E','E','E','E'],['C','A','H','H','H','H','D','D'],['B','B','H','H','H','H','D','D'],['B','B','H','H','H','H','D','D']],
[['2','2','F','F','F','D','D','D'],['A','C','F','F','F','D','D','D'],['A','C','F','F','F','3','3','3'],['A','C','G','G','E','E','E','E'],['A','C','G','G','E','E','E','E'],['1','C','G','G','H','H','H','H'],['B','B','G','G','H','H','H','H'],['B','B','G','G','H','H','H','H']],
]
import random

class Block:
    def __init__(self, width=1, height=1, name=0):
        self.h = height
        self.w = width
        self.name = name


class Plate:
    def __init__(self, width=8, height=8):
        self.width = width
        self.height = height
        self.plateArray = [['0'] * width for _ in range(height)]
        self._initPlate()

    def _initPlate(self):
        for i in range(self.height):
            for j in range(self.width):
                self.plateArray[i][j] = '0'

    def draw_detail(self):
        for i in range(self.height):
            print(i, self.plateArray[i])

    def draw(self):
        line = ''
        for i in range(self.height):
            for j in range(self.width):
                line += self.plateArray[i][j] + ' '
            print(line)
            line = ''

    def putBlock(self, block, x=0, y=0, direction=0):
        h = [block.w, block.h][direction == 0]
        w = [block.h, block.w][direction == 0]
        n = block.name
        if h + y > self.height or w + x > self.width:
            # print('超边 放不下')
            return False

        if not self._isEmptySubBlock(x, y, w, h):
            # print('这区域里有别的东西，放不下')
            return False

        self._updateSubBlock(x, y, w, h, n)
        return True

    def erasureBlock(self, block, x=0, y=0, direction=0):
        h = [block.w, block.h][direction == 0]
        w = [block.h, block.w][direction == 0]
        self._updateSubBlock(x, y, w, h, '0')

    def erasurePlace(self, x=0, y=0, width=1, height=1):
        for i in range(height):
            for j in range(width):
                self.plateArray[y + i][x + j] = '0'

    def erasureAreas(self, n):
        for i in range(self.height):
            for j in range(self.width):
                if (self.plateArray[i][j] == n):
                    self.plateArray[i][j] = 0

    def have(self, name):
        for i in range(self.height):
            for j in range(self.width):
                if (self.plateArray[i][j] == name):
                    return True
        return False

    def find(self, name):
        for i in range(self.height):
            for j in range(self.width):
                if (self.plateArray[i][j] == name):
                    return [j, i, name]
        return [-1, -1, name]

    def changeTo(self, plateArray):
        self.height = len(plateArray)
        self.width = len(plateArray[0])
        self.plateArray = plateArray

    def changeByNuM(self, num):
        decode_map = {
            '0001': '1',
            '0010': '2',
            '0011': '3',
            '1000': 'A',
            '1001': 'B',
            '1010': 'C',
            '1011': 'D',
            '1100': 'E',
            '1101': 'F',
            '1110': 'G',
            '1111': 'H',
        }
        str = bin(num)[2:]
        for i in range(self.height):
            for j in range(self.width):
                index = (i*self.height + j)*4
                self.plateArray[i][j] = decode_map[str[index: index+4]]

    def _isEmptySubBlock(self, x=0, y=0, width=1, height=1):
        valueChecker = '0'
        for i in range(height):
            for j in range(width):
                currentPotValue = self.plateArray[y + i][x + j]
                if currentPotValue != '0':
                    valueChecker = currentPotValue

        return valueChecker == '0'

    def _updateSubBlock(self, x=0, y=0, width=1, height=1, n='0'):
        for i in range(height):
            for j in range(width):
                self.plateArray[y + i][x + j] = n

    def _randomPosition():
        x = random.randint(0, 7)
        y = random.randint(0, 7)
        dir = random.randint(0, 1)
        return x, y, dir

    def _putRandom(self, block):
        x, y, dir = Plate._randomPosition()
        if not self.putBlock(block, x, y, dir):
            self._putRandom(block)

    def randomInitAs123(self):
        # 随机出题
        self._initPlate()
        block1 = Block(1, 1, '1')
        block2 = Block(1, 2, '2')
        block3 = Block(1, 3, '3')
        self._putRandom(block1)
        self._putRandom(block2)
        self._putRandom(block3)

    def randomInitAs123(self):
        self.randomInit([Block(1, 1, '1'), Block(1, 2, '2'), Block(1, 3, '3')])

    def randomInitAs123H(self):
        self.randomInit([Block(1, 1, '1'), Block(1, 2, '2'),
                        Block(1, 3, '3'), Block(3, 4, 'H')])

    def randomInitAsGH(self):
        self.randomInit([Block(2, 5, 'G'), Block(3, 4, 'H')])

    def randomInit(self, seed):
        self._initPlate()
        for s in seed:
            self._putRandom(s)

    def putBlocks(self, blocks):
        # 深度优先递归
        b = blocks[0]
        directions = ([0, 1], [0])[b.w == b.h]
        for i in range(self.height):
            for j in range(self.width):
                for dir in directions:
                    # 尝试在ji位置放置一块
                    if self.putBlock(b, j, i, dir):
                        currenBlockCount = len(blocks)
                        if currenBlockCount == 1:
                            # 放置成功后发现已经是最后一块了，
                            return True

                        remainingBlocks = blocks[1: currenBlockCount]
                        if self.putBlocks(remainingBlocks):
                            # 对剩下的块深度优先递归，看看是否成功
                            return True

                        # 剩下的块都递归完了，并未成功，则擦除当前块
                        self.erasureBlock(b, j, i, dir)

        # 所有位置都遍历了一遍还未成功，则此次递归失败
        return False

from mindstorms import MSHub
from mindstorms.control import wait_for_seconds
from mindstorms import ForceSensor
force = ForceSensor('A')
hub = MSHub()
edge_brightness = 66

def show_left_edge():
    hub.light_matrix.set_pixel(0, 0, edge_brightness)
    hub.light_matrix.set_pixel(0, 1, edge_brightness)
    hub.light_matrix.set_pixel(0, 2, edge_brightness)
    hub.light_matrix.set_pixel(0, 3, edge_brightness)
    hub.light_matrix.set_pixel(0, 4, edge_brightness)

def show_right_edge():
    hub.light_matrix.set_pixel(4, 0, edge_brightness)
    hub.light_matrix.set_pixel(4, 1, edge_brightness)
    hub.light_matrix.set_pixel(4, 2, edge_brightness)
    hub.light_matrix.set_pixel(4, 3, edge_brightness)
    hub.light_matrix.set_pixel(4, 4, edge_brightness)

def show_top_edge():
    hub.light_matrix.set_pixel(0, 0, edge_brightness)
    hub.light_matrix.set_pixel(1, 0, edge_brightness)
    hub.light_matrix.set_pixel(2, 0, edge_brightness)
    hub.light_matrix.set_pixel(3, 0, edge_brightness)
    hub.light_matrix.set_pixel(4, 0, edge_brightness)

def show_bottom_edge():
    hub.light_matrix.set_pixel(0, 4, edge_brightness)
    hub.light_matrix.set_pixel(1, 4, edge_brightness)
    hub.light_matrix.set_pixel(2, 4, edge_brightness)
    hub.light_matrix.set_pixel(3, 4, edge_brightness)
    hub.light_matrix.set_pixel(4, 4, edge_brightness)

def set_pixels(stage, puzzle):
    light_x = 0
    light_y = 0
    puzzle_x = 0
    puzzle_y = 0
    if stage == 'LT':
        show_left_edge()
        show_top_edge()
        light_x = 1
        light_y = 1
        puzzle_x = 0
        puzzle_y = 0
    if stage == 'RT':
        show_right_edge()
        show_top_edge()
        light_x = 0
        light_y = 1
        puzzle_x = 4
        puzzle_y = 0
    if stage == 'LB':
        show_left_edge()
        show_bottom_edge()
        light_x = 1
        light_y = 0
        puzzle_x = 0
        puzzle_y = 4
    if stage == 'RB':
        show_right_edge()
        show_bottom_edge()
        light_x = 0
        light_y = 0
        puzzle_x = 4
        puzzle_y = 4
    for i in range(0,4):
        for j in range(0,4):
            if puzzle.plateArray[puzzle_y + j][puzzle_x + i] in ['1','2','3'] :
                hub.light_matrix.set_pixel(light_x + i, light_y + j, 100)
            else:
                hub.light_matrix.set_pixel(light_x + i, light_y + j, 33)

stages = ['LT', 'RT', 'LB','RB']

currentScreen = 0
newQuestion = True
while True:
    wait_for_seconds(1)
    if force.is_pressed():
        hub.speaker.play_sound('1234')
        newQuestion = True
    if newQuestion:
        # 出题
        puzzle = Plate(width=8, height=8)
        puzzle.changeTo(answer[random.randint(0, len(answer)-1)])
        puzzle.draw()
        for i in range(0,4):
            set_pixels(stages[i], puzzle)
            wait_for_seconds(1.5)
            hub.light_matrix.off()
        set_pixels(stages[0], puzzle)
        hub.speaker.play_sound('Tadaa', 50)
        currentScreen = 0
        newQuestion = False
    if hub.right_button.was_pressed():
        hub.speaker.beep()
        currentScreen +=1
        if currentScreen == 4:
            currentScreen =0
        hub.light_matrix.off()
        set_pixels(stages[currentScreen], puzzle)
    if hub.left_button.was_pressed():
        hub.speaker.beep()
        currentScreen -=1
        if currentScreen == -1:
            currentScreen = 3
        hub.light_matrix.off()
        set_pixels(stages[currentScreen], puzzle)


